#                                    __   __  __  
#                                    \ \ / / / /
#                                     \ V / / /
#                                      \_/  \/
#
#                                    V E C T O R
#
#                                Vector Configuration
#
# ------------------------------------------------------------------------------
# Website: https://vectorproject.io
# Docs: https://docs.vectorproject.io
# Community: https://vectorproject.io/community
# Repo: https://github.com/timberio/vector
# ------------------------------------------------------------------------------

data_dir = "/var/lib/vector"

# Ingest data by tailing one or more files
[sources.apache_logs]
  type         = "file"
  include      = ["/var/log/apache2/*.log"]
  ignore_older = 86400 # 1 day

# Structure and parse the data
[transforms.apache_parser]
  inputs       = ["apache_logs"]
  type         = "regex_parser"
  regex        = '^(?P<host>[w.]+) - (?P<user>[w]+) (?P<bytes_in>[d]+) [(?P<timestamp>.*)] "(?P<method>[w]+) (?P<path>.*)" (?P<status>[d]+) (?P<bytes_out>[d]+)$'

# Output data
[sinks.print]
  type         = "console"