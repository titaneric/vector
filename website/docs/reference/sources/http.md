---
delivery_guarantee: "best_effort"
component_title: "HTTP"
description: "The Vector `http` source ingests data through the HTTP protocol and outputs `log` events."
event_types: ["log"]
issues_url: https://github.com/timberio/vector/issues?q=is%3Aopen+is%3Aissue+label%3A%22source%3A+http%22
min_version: null
operating_systems: ["Linux","MacOS","Windows"]
service_name: "HTTP"
sidebar_label: "http|[\"log\"]"
source_url: https://github.com/timberio/vector/tree/master/src/sources/http.rs
status: "beta"
title: "HTTP Source"
unsupported_operating_systems: []
---

The Vector `http` source ingests data through the HTTP protocol and [outputs `log` events](#output).

<!--
     THIS FILE IS AUTOGENERATED!

     To make changes please edit the template located at:

     website/docs/reference/sources/http.md.erb
-->

## Configuration

import CodeHeader from '@site/src/components/CodeHeader';

<CodeHeader fileName="vector.toml" learnMoreUrl="/docs/setup/configuration/"/ >

```toml
[sources.my_source_id]
  # REQUIRED
  type = "http" # must be: "http"
  address = "0.0.0.0:80" # example

  # OPTIONAL
  encoding = "text" # default, enum
  headers = ["User-Agent", "X-My-Custom-Header"] # example, no default
```

## Options

import Fields from '@site/src/components/Fields';

import Field from '@site/src/components/Field';

<Fields filters={true}>


<Field
  common={true}
  defaultValue={null}
  enumValues={null}
  examples={["0.0.0.0:80","localhost:8080"]}
  groups={[]}
  name={"address"}
  path={null}
  relevantWhen={null}
  required={true}
  templateable={false}
  type={"string"}
  unit={null}
  >

### address

The address to listen for connections on


</Field>


<Field
  common={true}
  defaultValue={"text"}
  enumValues={{"text":"Newline-delimited text","ndjson":"Newline-delimited JSON objects","json":"Array of JSON objects"}}
  examples={["text","ndjson","json"]}
  groups={[]}
  name={"encoding"}
  path={null}
  relevantWhen={null}
  required={true}
  templateable={false}
  type={"string"}
  unit={null}
  >

### encoding

The expected encoding of received data. `text` indicates newline-delimited text, with each line forming a message. `ndjson` indicates newline-delimited JSON, where each line must contain a json object. `json` indicates a JSON payload, which must be a JSON array containing JSON objects. Note that for `json` and `ndjson` encodings, the fields of the JSON objects are output as separate fields.


</Field>


<Field
  common={true}
  defaultValue={null}
  enumValues={null}
  examples={[["User-Agent","X-My-Custom-Header"]]}
  groups={[]}
  name={"headers"}
  path={null}
  relevantWhen={null}
  required={false}
  templateable={false}
  type={"[string]"}
  unit={null}
  >

### headers

A list of HTTP headers to include in the log event. These will override any values included in the JSON payload with conflicting names. An empty string will be inserted into the log event if the corresponding HTTP header was missing.


</Field>


<Field
  common={false}
  defaultValue={null}
  enumValues={null}
  examples={[]}
  groups={[]}
  name={"tls"}
  path={null}
  relevantWhen={null}
  required={false}
  templateable={false}
  type={"table"}
  unit={null}
  >

### tls

Configures the TLS options for connections from this source.

<Fields filters={false}>


<Field
  common={true}
  defaultValue={null}
  enumValues={null}
  examples={["/path/to/host_certificate.crt"]}
  groups={[]}
  name={"crt_path"}
  path={"tls"}
  relevantWhen={null}
  required={false}
  templateable={false}
  type={"string"}
  unit={null}
  >

#### crt_path

Absolute path to a certificate file used to identify this server, in DER or PEM format (X.509) or PKCS#12. If this is set and is not a PKCS#12 archive, [`key_path`](#key_path) must also be set. This is required if [`enabled`](#enabled) is set to `true`.


</Field>


<Field
  common={true}
  defaultValue={false}
  enumValues={null}
  examples={[false,true]}
  groups={[]}
  name={"enabled"}
  path={"tls"}
  relevantWhen={null}
  required={false}
  templateable={false}
  type={"bool"}
  unit={null}
  >

#### enabled

Require TLS for incoming connections. If this is set, an identity certificate is also required.


</Field>


<Field
  common={true}
  defaultValue={null}
  enumValues={null}
  examples={["${KEY_PASS_ENV_VAR}","PassWord1"]}
  groups={[]}
  name={"key_pass"}
  path={"tls"}
  relevantWhen={null}
  required={false}
  templateable={false}
  type={"string"}
  unit={null}
  >

#### key_pass

Pass phrase used to unlock the encrypted key file. This has no effect unless [`key_path`](#key_path) is set.


</Field>


<Field
  common={true}
  defaultValue={null}
  enumValues={null}
  examples={["/path/to/host_certificate.key"]}
  groups={[]}
  name={"key_path"}
  path={"tls"}
  relevantWhen={null}
  required={false}
  templateable={false}
  type={"string"}
  unit={null}
  >

#### key_path

Absolute path to a certificate key file used to identify this server, in DER or PEM format (PKCS#8).


</Field>


</Fields>

</Field>


</Fields>

## Output

The `http` source ingests data through the HTTP protocol and [outputs `log` events](#output).
For example:

```javascript
{
  "message": "This is one line from the plain text HTTP body",
  "timestamp": "2019-11-01T21:15:47+00:00"
}
```
More detail on the output schema is below.

<Fields filters={true}>


<Field
  common={true}
  defaultValue={null}
  enumValues={null}
  examples={["This is one line from the plain text HTTP body"]}
  groups={[]}
  name={"message"}
  path={null}
  relevantWhen={{"encoding":["text"]}}
  required={true}
  templateable={false}
  type={"string"}
  unit={null}
  >

### message

The message field, containing the plain text message.


</Field>


<Field
  common={true}
  defaultValue={null}
  enumValues={null}
  examples={["2019-11-01T21:15:47+00:00"]}
  groups={[]}
  name={"timestamp"}
  path={null}
  relevantWhen={null}
  required={true}
  templateable={false}
  type={"timestamp"}
  unit={null}
  >

### timestamp

The time the event was ingested. Note this may be overridden by JSON payloads.


</Field>


</Fields>

## How It Works

### Environment Variables

Environment variables are supported through all of Vector's configuration.
Simply add `${MY_ENV_VAR}` in your Vector configuration file and the variable
will be replaced before being evaluated.

You can learn more in the [Environment Variables][docs.configuration#environment-variables]
section.


[docs.configuration#environment-variables]: /docs/setup/configuration/#environment-variables
